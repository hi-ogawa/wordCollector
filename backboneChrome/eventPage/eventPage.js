// Generated by CoffeeScript 1.9.3
(function() {
  chrome.runtime.onMessage.addListener(function(request, sender, callback) {
    switch (request.type) {
      case "ajax":
        Promise.resolve($.ajax(request.settings)).then(function(data) {
          if (request.settings.dataType === "xml") {
            callback({
              status: "success",
              data: (new XMLSerializer()).serializeToString(data)
            });
          }
          return callback({
            status: "success",
            data: data
          });
        })["catch"](function(err) {
          return callback({
            status: "error",
            data: err
          });
        });
        return true;
    }
  });

}).call(this);
